(function(t,e){e.WeddingsEmail={init:function(){var i=!1,n=e.Context.data.weddings_email_transient_key;if(e.isSignedIn()){var s=t("#weddings-email-signup-confirm-overlay");if(s.length>0){e.eraseTransientValue(n);var r=t.extend({},e.Overlay.options,{load:!0});s.overlay(r),s.hasClass("reconfirm")||window.setTimeout(function(){s.data("overlay").close()},2500)}}else t(".email-subscribe-trigger").click(function(){i=!0}),t(document.body).on("inlineoverlay:close","#inline-overlay",function(){i=!1}),t(document.body).on("inlineoverlay:submit","#inline-overlay",function(){i&&e.setTransientValue(n,!0)});this.initSignedInButton()},initSignedInButton:function(){t("#weddings-email-signup").on("submit","form",function(e){e.preventDefault(),t(this).find(".button-large").hide().end().find(".spinner-large").show(),t.post("/browse/weddings-email",t(this).serialize()).done(_.bind(function(){t(this).find(".spinner-large").hide();var e=t("#weddings-email-signup").find(".success").show().end().find(".initial").hide().end();_(function(){e.fadeOut()}).delay(2e3)},this))})}}})(jQuery,window.Etsy);